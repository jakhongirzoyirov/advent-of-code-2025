package org.example.day10;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Main2 {
    // part2
    public static class Machine {
        public List<Integer> lights;
        public List<List<Integer>> buttons;
        public List<Integer> joltages;

        public Machine(List<Integer> lights, List<List<Integer>> buttons, List<Integer> joltages) {
            this.lights = lights;
            this.buttons = buttons;
            this.joltages = joltages;
        }
        public Machine(List<List<Integer>> buttons, List<Integer> joltages) {
            this.buttons = buttons;
            this.joltages = joltages;
        }
    }

    private static int[][] createButtonMatrix(int nItems, List<List<Integer>> buttons) {
        int[][] matrix = new int[nItems][buttons.size()];

        for (int i = 0; i < nItems; i++) {
            for (int j = 0; j < buttons.size(); j++) {
                matrix[i][j] = buttons.get(j).contains(i) ? 1 : 0;
            }
        }
        return matrix;
    }

    private static class GF2Result {
        List<Integer> pivotCols;
        int[][] aug;
        GF2Result(List<Integer> pivotCols, int[][] aug) {
            this.pivotCols = pivotCols;
            this.aug = aug;
        }
    }

    private static GF2Result gaussianEliminationGF2(int[][] matrix, List<Integer> target) {
        int nRows = matrix.length;
        int nCols = matrix[0].length;

        int[][] aug = new int[nRows][nCols + 1];
        for (int i = 0; i < nRows; i++) {
            System.arraycopy(matrix[i], 0, aug[i], 0, nCols);
            aug[i][nCols] = target.get(i);
        }

        List<Integer> pivotCols = new ArrayList<>();
        int row = 0;

        for (int col = 0; col < nCols; col++) {
            int pivot = -1;

            for (int r = row; r < nRows; r++) {
                if (aug[r][col] == 1) {
                    pivot = r;
                    break;
                }
            }
            if (pivot == -1) continue;

            int[] tmp = aug[row];
            aug[row] = aug[pivot];
            aug[pivot] = tmp;

            pivotCols.add(col);

            for (int r = 0; r < nRows; r++) {
                if (r != row && aug[r][col] == 1) {
                    for (int c = 0; c < nCols + 1; c++) {
                        aug[r][c] ^= aug[row][c];
                    }
                }
            }
            row++;
        }

        for (int r = row; r < nRows; r++) {
            if (aug[r][nCols] == 1) return null;
        }

        return new GF2Result(pivotCols, aug);
    }

    private static class RealResult {
        List<Integer> pivotCols;
        double[][] aug;
        RealResult(List<Integer> pivotCols, double[][] aug) {
            this.pivotCols = pivotCols;
            this.aug = aug;
        }
    }

    private static RealResult gaussianEliminationReal(int[][] matrix, List<Integer> target) {
        int nRows = matrix.length;
        int nCols = matrix[0].length;

        double[][] aug = new double[nRows][nCols + 1];
        for (int i = 0; i < nRows; i++) {
            for (int j = 0; j < nCols; j++) aug[i][j] = matrix[i][j];
            aug[i][nCols] = target.get(i);
        }

        List<Integer> pivotCols = new ArrayList<>();
        int row = 0;

        for (int col = 0; col < nCols; col++) {
            int pivot = -1;
            for (int r = row; r < nRows; r++) {
                if (Math.abs(aug[r][col]) > 1e-9) {
                    pivot = r; break;
                }
            }

            if (pivot == -1) continue;

            double[] tmp = aug[row];
            aug[row] = aug[pivot];
            aug[pivot] = tmp;

            pivotCols.add(col);

            double pv = aug[row][col];

            for (int r = 0; r < nRows; r++) {
                if (r != row && Math.abs(aug[r][col]) > 1e-9) {
                    double factor = aug[r][col] / pv;
                    for (int c = 0; c < nCols + 1; c++) {
                        aug[r][c] -= factor * aug[row][c];
                    }
                }
            }

            row++;
        }

        for (int r = row; r < nRows; r++) {
            if (Math.abs(aug[r][nCols]) > 1e-9) return null;
        }

        return new RealResult(pivotCols, aug);
    }

    private static boolean isValidInt(double val) {
        if (val < -1e-9) return false;
        return Math.abs(val - Math.round(val)) < 1e-9;
    }

    public static Integer solveIntegerSystem(List<Integer> target, List<List<Integer>> buttons) {
        int[][] matrix = createButtonMatrix(target.size(), buttons);
        RealResult res = gaussianEliminationReal(matrix, target);

        if (res == null) return null;

        List<Integer> pivotCols = res.pivotCols;
        double[][] aug = res.aug;
        int nButtons = buttons.size();

        List<Integer> free = new ArrayList<>();
        for (int i = 0; i < nButtons; i++) {
            if (!pivotCols.contains(i)) free.add(i);
        }

        if (free.isEmpty()) {
            int[] sol = new int[nButtons];
            for (int i = 0; i < pivotCols.size(); i++) {
                int col = pivotCols.get(i);
                double v = aug[i][nButtons] / aug[i][col];
                if (!isValidInt(v)) return null;
                sol[col] = (int) Math.round(v);
            }
            return Arrays.stream(sol).sum();
        }

        int maxTarget = target.stream().max(Integer::compare).orElse(0);
        int maxFree = maxTarget + 10;
        int best = Integer.MAX_VALUE;

        int fsize = free.size();
        int[] sol = new int[nButtons];

        int total = (int) Math.pow(maxFree, fsize);
        for (int t = 0; t < total; t++) {
            int tmp = t;
            for (int i = 0; i < fsize; i++) {
                sol[free.get(i)] = tmp % maxFree;
                tmp /= maxFree;
            }

            boolean ok = true;

            for (int i = 0; i < pivotCols.size(); i++) {
                int col = pivotCols.get(i);

                double v = aug[i][nButtons];
                for (int j = 0; j < nButtons; j++) {
                    if (j != col) v -= aug[i][j] * sol[j];
                }
                v /= aug[i][col];

                if (!isValidInt(v)) {
                    ok = false;
                    break;
                }

                sol[col] = (int) Math.round(v);
            }

            if (ok) {
                int sum = Arrays.stream(sol).sum();
                best = Math.min(best, sum);

                if (sum < maxTarget) break;
            }
        }

        return (best == Integer.MAX_VALUE) ? null : best;
    }

    public static int part2() {
        String[] split = getInput().split("\n");
        List<Machine> machines = new ArrayList<>();
        for (int i = 0; i < split.length; i++) {
            String[] line = split[i].split(" ");
            List<List<Integer>> buttons = new ArrayList<>();
            for (int j = 1; j < line.length - 1; j++) {
                String[] split1 = line[j].substring(1, line[j].length() - 1).split(",");
                List<Integer> button = new ArrayList<>();
                for (int k = 0; k < split1.length; k++) {
                    button.add(Integer.parseInt(split1[k]));
                }
                buttons.add(button);
            }
            String scheme = line[line.length - 1];
            String[] split1 = scheme.substring(1, scheme.length() - 1).split(",");
            List<Integer> arr = new ArrayList<>();
            for (int j = 0; j < split1.length; j++) {
                arr.add(Integer.parseInt(split1[j]));
            }
            machines.add(new Machine(buttons, arr));
        }

        int total = 0;
        for (Machine m : machines) {
            if (!m.joltages.isEmpty()) {
                Integer presses = solveIntegerSystem(m.joltages, m.buttons);
                if (presses != null) total += presses;
            }
        }
        return total;
    }

    public static void main(String[] args) {
//        System.out.println("Part 1: " + part1());
        System.out.println("Part 2: " + part2());
    }
    private static String getExample() {
        return "[.##.] (3) (1,3) (2) (2,3) (0,2) (0,1) {3,5,4,7}\n" +
                "[...#.] (0,2,3,4) (2,3) (0,4) (0,1,2) (1,2,3,4) {7,5,12,7,2}\n" +
                "[.###.#] (0,1,2,3,4) (0,3,4) (0,1,2,4,5) (1,2) {10,11,11,5,10,5}";
    }

    private static String getInput() {
        //worked https://github.com/Mishco/adventofcode/tree/master/2025/day-10
        return "[.##....#..] (0,1,3,4,5,6,7,8,9) (0,1,2,4,5,6,7,8,9) (0,1,2,4,6,7,9) (1,2,3,5,7,8,9) (1,3,8) (7) (3,6,8) (0,1,2,3,4,5,7,8) (0,2,4,5,6,7,9) (0,3,4,7,8) (2,3,6) {49,54,38,101,49,33,61,56,84,34}\n" +
                "[..#.....#] (0,2,4,6,7) (0,4,6,7) (0,1,2,5,7,8) (0,3,5,8) (0,1,2,3,4,7,8) (3,5,7) (3,6) (0,1,2,3,5,6,7,8) (1,3,4,5,7,8) (0,1,3,4,6,7,8) {212,169,172,191,56,162,175,199,187}\n" +
                "[.#....###] (4,7) (2,6,7,8) (0,1,2,4,6,7,8) (0,5) (5,8) (1,4,5) (0,2,3,5,6) (2,4,5,8) (2,3) (0,6) {43,19,242,19,40,51,227,226,240}\n" +
                "[.###.##.##] (1,3,4,6,7,8) (0,1,2,4,8) (1,2,5,6,8,9) (3) (0,2,4,8) (1,4,5,6) (2,4,6,8,9) (0,1,3,5,6,8) (0,1,3,5,6,8,9) (0,3,4,5,6,7,8,9) (3,6) (4,7,9) {43,42,45,66,87,33,76,44,84,55}\n" +
                "[#.##..###.] (2,3,5,7,8) (4,5) (0,1,2,4,5,7) (2,6,7) (2,3,4,5,6,7,8,9) (0,3,5,6,8,9) (0,1,2,3,5,6,7,9) (0,4,5,6,9) (3) {42,14,42,39,43,75,39,42,33,29}\n" +
                "[#....] (0,2,3) (0,2,3,4) (2,3) (0,1,2) (0,3,4) (3) (1,2) {75,18,60,71,39}\n" +
                "[##.##..] (1,2,3,4,6) (2,4) (0,1,3,5) (0,2,3,5) (0,1,3,4) {14,25,30,34,25,10,20}\n" +
                "[...#.#] (0) (1,4) (3,5) (2,4) (0,1,2,3) (1,2) (0,1,2,4) {50,56,62,34,48,17}\n" +
                "[.#..######] (0,2,5,7,8) (0,1,3,4,5,6,8) (2,3,4,6,8) (1,2,4,6,7,8) (3,5,7,9) (0,2,3,4,5,7) (0,1,2,7,8) (1,5,8) (1,2,3,7,9) (2,4,5,6,9) (2,3,4,5) (0,1,9) {45,55,66,60,56,86,50,55,82,32}\n" +
                "[#.##] (0,2) (0,1,3) (0,2,3) {26,18,8,21}\n" +
                "[##.#] (0,1,2) (0,1,3) (0,2,3) (1,2) (3) {187,41,180,178}\n" +
                "[..#.##.#] (4,5,7) (1,3,4,5,7) (0,1,2,4,5,6,7) (2,3,4) (2,3,5,6,7) (0,3,4,7) (0,2,4,5,6,7) (1,2,3,6) (1,2,3,4,5,7) {42,47,90,57,95,81,58,84}\n" +
                "[.##.###] (0,3,5) (0,1,2) (0,3,4,6) (0,1,3,4,5,6) (1,2) (0,4,5,6) (2,4) (2) (0,1,2,4,5,6) {72,38,58,36,55,38,41}\n" +
                "[..#.#] (1,3,4) (2,4) (0,3,4) (0,2,3) {2,18,9,20,27}\n" +
                "[.###.##] (1,2,3,5,6) (0,1,3,4,6) (2,3,4) (0,1,5,6) (0,1,2,4,5) {37,152,137,150,37,137,150}\n" +
                "[##.....] (0,3,4,5,6) (1,3,5,6) (0,1,2,4,6) (4,5) (2,3,5) (0,1,3) (0,2,6) (1,2,5,6) (0,2,4,6) {72,27,57,50,54,47,62}\n" +
                "[##.##..##] (1,2,5,6,8) (0,1,3,6) (1,3,4,6,7) (0,7) (2,3,4,6,7,8) (0,1,2,4,6,7,8) (1,2,3,5,6,8) (3,4,8) (2,4,7,8) (4,7) {52,178,48,171,178,16,185,178,65}\n" +
                "[#..#.] (0,3) (0,1,4) (1,2,3,4) (0,4) (0,1,3) (0,3,4) (0,1,2) {50,58,25,42,31}\n" +
                "[..##...#.] (0,3,5,8) (1,2,3,6,8) (2,3,4) (1,4,7) (0,2,3,4,5,8) (0,2,4,5,6) (0,2,4,8) (1,3,5,6,7,8) {50,35,69,62,64,48,44,19,54}\n" +
                "[...#.....#] (0,2,4,5) (2,5,7) (0,1,2,3,5,7,8) (2,3,4,7,8) (0,1,3,4,5,6,7,9) (3,9) (3,4,7,8,9) (0,1,3,5,6,7,8,9) (4,7,8,9) (0,1,2,3,4,7,9) {218,212,47,247,249,219,194,262,41,247}\n" +
                "[#.###.##] (0,1,2,3,7) (3,4,5) (0,1,2,3,5,7) (2,3,7) (0,4,6,7) (0,5) (0,1,2) (0,1,2,3,5,6) {60,41,55,55,31,30,22,59}\n" +
                "[....#.] (0,1,3,4,5) (3,4) (0,2,3,5) (1) (0,2) (0,1,3,4) {46,46,18,36,34,16}\n" +
                "[...##.##] (1,4) (0,1,2,4,5,7) (2,3,4) (0,1,3,4,5,7) (1,3,6,7) (0,4,5,6,7) {31,32,194,201,235,31,26,37}\n" +
                "[.#..#] (1) (0,2) (2,3) (0,2,4) {37,134,50,13,20}\n" +
                "[#.#...] (0,1,4,5) (0,2,3,4,5) (0,1,5) (0,1,3,5) (0,2,3,4) (1,4,5) (1,3,4) {56,39,33,39,64,54}\n" +
                "[..###.] (0,2,3,4) (1,3,5) (0,1,4,5) (0,1,3,4,5) (1,3,4) (0,2) (1,2) {45,82,28,52,59,46}\n" +
                "[.#......] (3,4,6) (1,2) (0,1,4,5,7) (0,1,3,4,6) (0,2,5) (1,7) (3,6) (6) (0,2,3,5,7) {40,39,32,33,21,36,34,31}\n" +
                "[..##.#####] (1,3,4,6,7,9) (2,4,7,9) (0,1,2,3,5,6,7,8,9) (3,4,9) (1,2,6,8,9) (0,1,5,6,8,9) (2,5,6,8,9) (2) (2,8,9) (0,1,2) (3,4,7) (0,1,2,3,4,5,7) (3,5) {24,56,89,38,45,33,59,46,56,93}\n" +
                "[###.#] (0,1,2,4) (2,3) (0,1) (0,2,3) (1,4) {38,39,34,25,21}\n" +
                "[##.#] (2,3) (2) (1,3) (0,1,2) (0,3) (1,2,3) {20,31,18,52}\n" +
                "[#...] (1,3) (0,2) (0,1,3) {29,38,11,38}\n" +
                "[#....#.#] (0,2,3,4,5) (0,3,4,7) (4,5,7) (0,5,6,7) (1,2,3,5,6,7) (0,1,3,4,5,6,7) (1,3,6) (0,3,5,7) (0,6) {147,32,20,149,38,169,48,166}\n" +
                "[#...] (1,3) (0,2,3) (0,1,3) (0) (1,2) {17,13,16,25}\n" +
                "[#..#.#..] (3,4,7) (1,4) (1,2,3,7) (0,3) (2) (0,1,4,5) (0,1,2,5,6) (2,3,5,6) (2,5) {42,58,55,39,33,38,18,26}\n" +
                "[####] (1) (1,2,3) (0,2,3) {20,144,151,151}\n" +
                "[..#.#.#] (0,1,2,4,5) (0,1,2,3,4,6) (0,3,4,5) (4,6) (0,2,3,5,6) (0,4,5,6) {56,21,35,25,60,52,50}\n" +
                "[.#.#.##.] (1,3,4) (2,5,6,7) (0,3,4,6,7) (1,3,5,6) (0,1,2,4,5,7) (3,5) (3,4,6) {37,30,20,62,57,43,53,39}\n" +
                "[#.#.##.] (0,1,5,6) (0,4,5) (2,3,5) (0,1,3,4,6) (1,2) (0,2,3,4) (0,2,3) {62,37,25,30,36,34,29}\n" +
                "[..###] (0,1,4) (0,1,3) (1,4) (0,2) {58,58,18,20,38}\n" +
                "[#....##...] (4,5,6,7,9) (0,4,6,7,8) (0,1,2,4,5,6) (0,1,4,6) (0,4,5,6) (3,6,7) (0,1,2,3,4,6,7,8,9) (6,7,8) (0,3,5,7,8,9) (1,4) {47,53,28,27,65,37,56,42,28,29}\n" +
                "[##..#.] (1,4) (3,4) (0,1,2,3) (0,2,3) (1,3,4,5) (1,5) (1,2,5) (0) {117,64,34,50,47,41}\n" +
                "[.###] (0,2) (2,3) (1,2,3) (0) {19,1,205,189}\n" +
                "[#.#.] (1,2,3) (0,2) {106,4,110,4}\n" +
                "[..##.] (2,4) (0,1,2,4) (0,2,3,4) (0,3) (1) (3,4) {37,24,47,25,49}\n" +
                "[..#.#] (0,1,3) (3) (0,2,3) (0,1,2,3,4) {29,17,22,44,10}\n" +
                "[####...#] (2,3,4,5,6,7) (0,4) (1,2,3) (0,3) (0,1,4,5,6,7) (4,5,7) (1,2,5) (1,4) (2,4,5,6) {29,58,73,38,76,63,45,26}\n" +
                "[###...] (0,4) (0,3) (1,2,5) (0,2,5) (2,4) (0,2,4) (0,2,3,5) (0,1,2) {68,18,73,18,41,28}\n" +
                "[#.#...#] (1,5,6) (2,3,4,6) (2,3) (0,1,3,5) (0,1,2,3) {18,33,30,44,12,29,27}\n" +
                "[#..#.#..] (0,2,5,6) (0,1,3,4,5,6,7) (0,6,7) (0,1,2,3,4,5,7) (0,2,3,7) (0,2,3,4,7) {73,9,55,48,28,20,29,62}\n" +
                "[###.#..#..] (0,1,2,3,5,6,8) (0,1,3,4,5,6,8,9) (1,2,3,4,5,6,7,8,9) (1,4,5) (0,1,3,6,7) (2,6,8) (1,4,5,7,8,9) (0,1,3,4,5,6,7,8) (2,3) (0,1,2,3,4,6,8,9) (3,9) (0,1,4,5,6,7,9) {59,113,52,83,96,95,93,79,81,90}\n" +
                "[####.##.#.] (2,4,5,6,8) (0,3,6,8,9) (1,3,4,5,7,8,9) (2,3,8) (0,1) (2,5,6) (1,2,3,5,7,9) (0,2,3,4,5,7,8,9) (5,9) {22,24,43,35,27,46,29,24,38,33}\n" +
                "[####.] (0,1,2,3) (0,1,3,4) (0,1) (2,3) {18,18,22,38,16}\n" +
                "[#..#.] (1,2,4) (0,3) (0,2) {15,0,8,7,0}\n" +
                "[..####] (0,3) (3) (0,1,2,4,5) (0,1,2,3) (1,2,5) (2,4,5) (0,1,2,5) {36,26,31,34,5,15}\n" +
                "[#........#] (0,9) (0,1,4,5,6,7,8,9) (1,4,5,7,8,9) (2,4,6,8) (1,7) (1,3,4,5,7,8) (3,5) (0,1,3,4,5,8,9) (0,1,2,5,6,9) (1,2,5,6,8,9) (2,3,5,9) (0,2,3,4,5,6,8,9) (2,3) {78,210,80,72,191,246,74,167,207,242}\n" +
                "[##..###.] (0,1,4,7) (0,6,7) (1,2) (0,3,6) (2,5,6) (0,1,2,3,4,5,6) (0,4) {63,44,33,16,34,13,42,37}\n" +
                "[####.#...] (2,3,7) (1,3) (5,6) (0,1,2,3,4,6,7) (0,1,2,3,5,6,7) (0,3,8) (0,2,3,7) (0,1,2,4,5,8) (3,8) (0,2,3,4,5,6,8) (3,5,7) {37,38,47,89,19,47,39,57,17}\n" +
                "[#...#..#] (1,3,5,7) (0,4,7) (2) (0,1,6) (1,2,3,4,5,6,7) (4,5,6) {32,25,15,10,37,28,35,27}\n" +
                "[.##.#.####] (0,2,3,4,5,7,8,9) (1,4,6,7,9) (3,4) (0,1,2,3,5,6,7,8,9) (1,3,5,6) (0,1,4) (0,1,8,9) (0,1,3,4,6,7,8) (0,1,2,3,4,6,9) {80,73,43,70,90,25,52,50,46,61}\n" +
                "[##..#] (3,4) (2,4) (0,3,4) (0,1,2,3) (0,2) {42,14,32,46,34}\n" +
                "[.##..###..] (3,5,7) (2,3,4,5,6,7,8) (1,5,7,8) (0,1,2,5,6,7,8,9) (2,5) (0,1,2,3,4,6,8,9) (6,7,8,9) (0,1,3,4,5,6,8,9) (0,1,3,9) {53,200,40,59,38,206,75,207,222,73}\n" +
                "[#####.] (1,2,5) (0,5) (0,3,5) (2,3,4) (0,2,3,4) (1,5) {29,30,30,16,16,46}\n" +
                "[.##..] (0,1,4) (0,3) (1,2) {29,166,154,17,12}\n" +
                "[#..#.##] (1,3,4,5,6) (1,2,4,5,6) (1,3,6) (0,2,5) (0,2,4,5) (2,5) (0,1,2,6) (2,3,6) {42,37,55,20,30,44,41}\n" +
                "[########.] (3,4,5,8) (3,5,7,8) (0,2,4,5,7,8) (3,5,6) (0,1,2,3,4,5,6,8) (1,2,7) (0,1,2,3,4,5,6,7) (0,1,5,7,8) (0,1,2,5,8) {226,225,217,61,49,255,42,68,230}\n" +
                "[#...#.#] (0,6) (0,2,5,6) (1,2,3) (0,1,3,4,6) (5) (0,1,4) {43,50,25,34,30,14,27}\n" +
                "[.#..#.#.] (1,2,4,6,7) (1,3,4,5,6,7) (1,4,6) (0,3,4,5,6) (0,4,7) (0,5,6) (0,1,2,4,5,7) (0,2,3,4,5,6,7) (2,3,5) (0,5) {45,36,41,26,53,54,45,36}\n" +
                "[.#.#..##] (0,1,3,7) (0,3,4,5) (1,2,6) (0,1,4,5) (0,1,3,4,5,6,7) (2,4,7) (1,2,4,5,6,7) {26,42,31,20,34,29,33,21}\n" +
                "[...#.#.#] (1,3,4,6) (1,3,4,6,7) (0,2,3,4,7) (3,5,7) (2,5) (2,6,7) (0,1,2,3,5,7) (1,2,3,4,5,7) {34,48,241,74,44,225,30,80}\n" +
                "[###.] (0,1,3) (1,2,3) (0,1,2) (0,3) {13,16,12,25}\n" +
                "[#.##...#] (0,1,2,4,6,7) (1,4,7) (0,1,2,5) (0,2,3,4,5,6) (0,2,6,7) (0,1,2,3,4,5,6) (3,4) (0,2,3,4,5,6,7) {99,60,99,56,78,68,81,57}\n" +
                "[#...###.#] (0,1,8) (2,3,7,8) (0,2,5,8) (0,1,2,4,5,6,7) (4) (0,2,5,7) (0,6,7) (0,2,7,8) (0,2,3,4,5,7,8) (0,3,5,7,8) (3,8) {188,33,62,137,43,156,32,174,164}\n" +
                "[#.#.######] (1,3) (0,2,3,5,7,9) (0,4,5,6,7) (0,4) (0,2,3,7,8) (1,4,6) (1,3,6,9) (2,5) (0,1,4,7) (0,1,3,4,5,6,8,9) (0,2,4,5,6,7,8,9) (2,3,5,7,8,9) {56,32,50,53,41,49,37,52,33,22}\n" +
                "[#.#.####..] (0,1,2,3,4,6,7,9) (1,3,5,9) (4,5) (0,2,3,5,6,7,8,9) (1,2,4,6,9) (0,1,2,3,4,6,8,9) (1,2,3,4,5,6,7,9) (0,2,3,4,5,7,8,9) {232,60,256,268,76,268,238,235,229,275}\n" +
                "[####.###] (1,4,5,6,7) (0,3,5,6,7) (0,3,4,5,6,7) (1,2) (1,5,7) (0,1,2,4,6,7) {27,45,28,7,31,24,36,44}\n" +
                "[##.#.] (0,2,3,4) (1,2,3) (1,3) (1,4) (0,1,3) {26,147,27,149,38}\n" +
                "[..#.#] (0,2) (1,2,3) (2,3) (0,3,4) (1,3,4) (2,4) {16,22,33,28,19}\n" +
                "[#.##.#..#] (4,8) (1,5,6) (1,2,4,5,6,7,8) (0,1,2,3,4,6,7,8) (0,1,2,4,5,7) (1,7,8) (2,3) (0,2,3) (0,3,4,5,6,7,8) {28,32,26,39,35,38,39,41,44}\n" +
                "[.##...#] (0,1,2,4) (1,5,6) (2,3,5) (1,3) (0,3,4) (0,3,4,5,6) {34,12,9,34,34,18,16}\n" +
                "[.##..##.#] (1,2,3,5,6,8) (0,2,4,8) (0,1,2,3,4,6,7) (0,3,4,5,6,7,8) (0,1,2,3,5,7,8) (0,1,3,6,8) (1,3,4,5,7) (0,3,4,5,6,7) (0,2,5,7,8) (0,3,4,7,8) (0,1,2,3,5,6,7,8) {117,87,74,126,90,89,80,110,100}\n" +
                "[#.##.#] (1,2,4) (0,3) (0,1,4) (0,1,2,4,5) (0,3,5) {46,25,17,23,25,32}\n" +
                "[.##.] (3) (0,1) (1,3) (2,3) {126,135,1,11}\n" +
                "[....#..] (4) (0,2,4,5,6) (2,3,5,6) (2,3,4,5,6) (0,1,4,6) {13,13,31,31,32,31,44}\n" +
                "[######] (0,2,3,5) (0,1,2,3,4,5) (0,1,2,3,4) (1,3,4) {24,28,24,39,28,19}\n" +
                "[#..##] (1,2,3,4) (0,3,4) (0,1,2,4) {31,21,21,14,33}\n" +
                "[.....#] (0,2) (1,3,4) (1,4) (2,3) (2,3,5) (0,1,4,5) (0,1,2,5) (3,5) {50,53,63,39,34,53}\n" +
                "[.###...#] (0) (0,1,4,5,6) (0,2,4,6) (3,4,7) (1,3,4,5,6,7) (5,7) (3,6) (1,4,5,6,7) (0,1,3,5,6,7) {64,60,14,65,64,78,92,70}\n" +
                "[#..#...#.#] (5,6) (0,1,3,4,5,6,9) (2,4,6,7) (1,2,3,4,5,6) (0,1,5,6,8) (1,7) (0,3,9) (1,2,5) (0,4,5,7) {39,57,40,17,39,69,51,31,20,6}\n" +
                "[#.##.#.] (1,2,4,5) (4,5,6) (0,1,2,4,5) (3,4) (2,5) (0,1,2,5) (1,3) (1) {16,54,34,30,41,38,4}\n" +
                "[#.##..#] (1,2,4,5,6) (0,1,4,5) (0,1,2,3,5) (1,2,3,5,6) (0,2,6) (0,1,3,4,6) (3,4,5,6) {61,62,35,63,57,61,62}\n" +
                "[####.#...#] (1,3,5,6,9) (4,7,8) (1,2,3,4,7,9) (0,2,4,7,8,9) (0,5,6,8,9) (0,2,3,4,5,6,7,9) (0,1,3,5,6,7,9) (3,4,6,8) (1,7,8) {52,27,32,29,50,35,41,62,66,61}\n" +
                "[##.#] (0,2) (0,1,3) {12,11,1,11}\n" +
                "[.#...#..##] (0,9) (0,1,4,7) (0,1,2,4,5,6,7,9) (0,2,4,6,8,9) (0,1,2,3,4,7,9) (0,4,5,6,7,9) (0,1,2,5,6,7,9) (0,3,4,6,7,8,9) (0,1,3,4,5,8,9) {190,45,157,28,171,35,151,31,150,188}\n" +
                "[.###] (1,2,3) (3) (0,3) (1) (0,2,3) (1,2) {16,17,17,36}\n" +
                "[####] (0) (0,3) (0,1,2) (1,2,3) {35,4,4,19}\n" +
                "[...#....] (0,1,2,5) (0,2,5) (1,2,3,4,5,6) (6) (0,2,3,4,5) (2,4,6) (2,4) (1,2,3,5,7) (0,2,3,4,5,6,7) (0,3) {223,43,102,249,75,66,63,28}\n" +
                "[##..##.#.] (0,3,6,7) (0,1,2,5,6,8) (0,1,3,5,6) (0,1,2,4,5,7) (5) (1,2,5,8) (0,1,3,6,7,8) {73,60,34,41,17,58,56,49,34}\n" +
                "[##.##.] (1,5) (0,1,2,3,5) (0,2,4) (2,3,5) (0,2,3,4,5) {20,18,38,24,20,42}\n" +
                "[.#..#] (2) (0,2,3) (0,3,4) (1,2,4) (1,4) {18,16,45,18,18}\n" +
                "[###..] (0,3,4) (1,2,3,4) (1,3,4) {11,11,6,22,22}\n" +
                "[..###.####] (0,2,4,6,7,9) (1,5,9) (4,5) (0,1,8) (1,3,4,6,7,8) (4,7,9) (0,3,4,5,6,7,8) (0,1,2,3,4,6,7,9) {55,38,32,27,69,35,46,52,27,46}\n" +
                "[.#...#] (0,1,2,4) (0,1) (2,3,5) (0,2,4,5) (0,1,2,3,5) (1,3) {51,54,33,16,24,13}\n" +
                "[.##..] (0,1,2) (0,3) (0,1,3) (1,2) (3,4) (1,4) {25,192,185,18,9}\n" +
                "[##.###.#.#] (0,2,8) (0,1,3,5,6,7,8,9) (0,1,2,3,4,5,6,9) (0,1,2,3,5,8,9) (3,6,7,9) (2,4) (0,1,2,5,6,7,8) (1,2,3,8) {49,48,42,43,21,44,49,31,35,39}\n" +
                "[..##] (1,3) (2,3) (0,1,3) {20,20,19,39}\n" +
                "[....#...#.] (0,2,3,5,6,7,8,9) (4,9) (3,4,7,8,9) (3,6,7,9) (0,1,3,5,6,7,9) (0,5,7) (5) (0,1,2,3,5,7,9) (1,2,3) (5,7,9) (1,2,3,4,5,6,7,9) (0,1) (0,2,3,5) {54,54,47,66,177,65,17,63,9,215}\n" +
                "[.#.##...##] (0,1,7) (0,1,2,3,4,5,6,7,9) (1,4,5,8) (2,3,4) (2,4,5,6,9) (3,5) (0,1,3,4,9) (0,1,2,3,4,5,6,8,9) (0,1,2,6,8,9) (0,5,6) (1,2,3,4,5,6) {242,249,65,241,254,81,61,30,33,243}\n" +
                "[...#.] (0,2) (1,4) (0,1,3,4) (1,3,4) (0) (0,2,3) {41,5,35,17,5}\n" +
                "[..#.#] (0,2,4) (0,1,2,4) (1,3) (2,4) (0,2,3) (2) (0,1,4) {218,26,234,202,40}\n" +
                "[#.#.] (1,3) (0,2) {9,10,9,10}\n" +
                "[#######] (1,2,5) (4,5,6) (0,3,4,5,6) (0,6) (3,5,6) (0,1,3,5,6) (1,5,6) (0,2,4,5,6) {41,28,12,35,30,76,88}\n" +
                "[.###.#.] (1,2,3,4,6) (0,1,4) (0,2,5) (0,1,2,3,5,6) (2,3,6) (1,2,4,6) (0,2,3,4,5) {29,23,53,29,30,23,31}\n" +
                "[.###...##.] (0,2,4,6,8) (3,6) (0,1,4,5,6,9) (2,3,4,5,8) (2,3,5,9) (1,2,3,4,5,8) (2,9) (3,7,8) (0,1,3,4,5,6,8) (2,5,8,9) {39,39,71,60,62,57,59,1,55,42}\n" +
                "[.##.###.#] (1,2,4,5,7,8) (0,2,5) (0,1,3,5,7,8) (6,7) (0,1,2,4,8) (0,2,3,4,5,6,7,8) (1,2,3,4,5,7,8) (0,3) (0,1,2,6,8) {62,173,185,48,159,183,31,178,183}\n" +
                "[#..#.#.###] (2,4,5,6,7,8,9) (0,2,9) (0,1,2,4,5,6,7,9) (4,8) (1,2,6,7,8,9) (1,3,4,5,7,9) (1,2,3,4,5,7) (5,8) (6) {25,44,69,14,54,51,52,56,59,55}\n" +
                "[.##.] (0,3) (1) (2) {166,10,14,166}\n" +
                "[.##..#...] (3,4,5) (0,1,3,4,5,6,7,8) (0,2,3,4,6,7,8) (0,1,2,7) (5) (1,6) (0,2,4,6,8) (2,4,7) (0,1,4,6) (0,8) (1,4,5,6,8) {56,57,49,18,57,34,49,51,42}\n" +
                "[.###] (1,2,3) (0,1,2,3) {126,139,139,139}\n" +
                "[##.##] (1,2,3) (4) (0,1) (0,2,4) (0) (1) (1,3,4) {167,41,167,21,167}\n" +
                "[...#..] (0,3,4) (0,2,5) (1,2,5) (0,4,5) (0,1,3) (3) (0,1,2,3,4) (0,1,2,4) {54,25,12,57,37,17}\n" +
                "[.###.] (1,3) (0,1,3) (0,1,2,4) (0,2,4) (1,2,4) (0,1) (0,1,3,4) {58,254,44,220,48}\n" +
                "[#.....] (5) (1,3) (0,1,2,4) (3,4) (2,3,4) (1,2,4,5) {12,210,33,220,44,13}\n" +
                "[#....#.#.#] (1,2,3,5,6,7,8,9) (2,3,5,9) (0,1,4,8) (5,9) (0,2,5,9) (0,1,2,4,7) (1,7,8) (2,6,8) (0,2,3,4,5,6,8,9) (0,7) (0,2,3,4,7,8,9) (0,1,3,4,5,6,7,8) (1,2,3,4,5,6,7) {81,62,62,40,53,41,17,86,56,43}\n" +
                "[.##..####] (0,2,4,5,6,8) (0,1,3,5) (4,5) (0,1,2,3,4,5,6,8) (0,2,3,4,6,7,8) (0,2,5,7) (1,2,3,4) (2,5,8) (0,1,8) {57,141,175,142,157,57,27,29,50}\n" +
                "[....###] (0,6) (1,2,3) (1,2,4,5,6) (0,1,2,3,4) (3,5) (1,2) (0,2,3,4) (1,2,3,4,5,6) {142,47,159,158,145,32,41}\n" +
                "[#.###.#] (3,5) (0,1,4) (1,2,3,6) (0,1,3,6) (0,2,4,5,6) {33,34,11,20,20,6,24}\n" +
                "[#.###...#] (0,1,8) (7,8) (0,1,2,3,5,7,8) (1,2,3,4,6,7) (0,2,3,4,8) (0,1,2,3,5,6,7,8) (0,1,2,3,4,6,7,8) (0,1,3,4,6,7,8) {60,60,54,71,46,25,44,72,73}\n" +
                "[#..####] (4,5,6) (0,2,5,6) (2,6) (0,1,4,5) (0,1,3) (0,1,3,5,6) (1,4,5,6) {46,37,16,14,30,45,29}\n" +
                "[.###] (1,3) (0,1) (0,1,2) (1,2) (0,3) (0,2,3) {49,53,43,39}\n" +
                "[...#.##..#] (0,1,2,3,4,5,6) (0,1,5,6,9) (1,7,8) (4,5,6,7,9) (0,1,2,3,4,5,6,9) (0,1,4,8) (9) (0,3,5,7) (2,4,5,6,7,8,9) (1,2,3,8) (0,1,4,6,7,9) {66,88,70,54,76,67,81,45,47,72}\n" +
                "[...#] (0,3) (0,2,3) (1,2) (0,1) (3) {28,10,18,34}\n" +
                "[##.#....##] (2,4,5,8,9) (0,1,2,3,4,5,6,8,9) (0,2,3,4,5,6,8,9) (0,2,4,8,9) (1,2,3,4,6,7,8,9) (4,7) (5,6,7,8,9) (2,5,7,9) (3,4,6,8,9) (0,1,6) {23,29,52,42,57,41,57,46,59,72}\n" +
                "[.#.##] (1,3,4) (0,2,3,4) (0,1,2) {18,22,18,22,22}\n" +
                "[##.#..#] (0,1,4) (1,3,4,5,6) (2,6) (0,1,3,4,5,6) (0,2,5) (0,4) (3,4) (0,1,3,6) (1,2) {219,74,194,61,74,194,55}\n" +
                "[###.#.] (2,4,5) (0,1,5) (0,4) (0,2,3,5) {22,3,21,16,8,24}\n" +
                "[.##.##.#..] (1,5,6,9) (0,1,3,7,8,9) (1,2,4,5,6,7,8) (0,1,2,7,9) (0,1,2,3,4,7,8,9) (0,1,4,5,6,8) (2,4,5,6,8) (0,1,2,3,4,5,6,8) (0,1,2,3,6,7,8) (0,1,2,4,6,8,9) (0,1,3,4,5,6,8,9) {91,108,97,47,75,56,85,68,98,49}\n" +
                "[.##.#.###] (1,5,6) (0,3,5,6,7,8) (0,2,3,5,6,8) (1,2,4,6,7) (1,2,4,5,6,8) (2,3,4) (2,3,6) (0,2,5,6,8) {19,26,21,28,9,42,52,17,22}\n" +
                "[..#.#..#] (0,1,3,5,6,7) (2,3) (0,1,2,3,5,7) (0,1,2,3,6) (0,2,3) (0,5) (1,2,3,4,5,6,7) (2,4,7) {15,27,160,149,35,31,27,40}\n" +
                "[##..] (3) (1,2) (0,2,3) (0,1,3) (2,3) {9,10,21,29}\n" +
                "[..#####] (2,4) (0,2,3,4) (1,2,3,4,5) (2,6) (1,5) (1,3) (0,2) {16,30,42,31,30,18,8}\n" +
                "[####] (2,3) (0,2) (1,2) (0,1,2) (0) (1,3) {35,41,57,26}\n" +
                "[#.###.#.] (0,1,3,6,7) (0,1,5,6) (0,1,2,3,4,7) (0,2,3,5,7) (2,5,6,7) (1,2,3,4,5) (1,4) {55,73,48,49,34,57,57,53}\n" +
                "[....#..] (1,3,6) (0,5,6) (1,2,3,4,5) (0,2,3,4,5) (1,5) (0,1,4) (0,1,6) (2,3) {25,160,145,159,135,155,24}\n" +
                "[.##...##.] (1,4,6) (0,1,3,4,6,7,8) (0,2,3,4,5) (5,7) (4,6,8) (0,1,5,6,7) (0,1,2,4,6,7) (1,2) {58,252,43,37,243,42,237,46,18}\n" +
                "[#.#..#.] (0,1,3,5,6) (0,2,4,5,6) (2,3,4,5) (1,2,6) (0,3,6) (1,2,3,6) {33,39,41,42,10,18,64}\n" +
                "[..#..#..##] (1,4,5,7,8) (0,1,2,3,5,6,7,9) (0,1,2,4,6,7,8) (3,4,5,8) (1,2,3) (0,3,4,7,9) (3,7) (1,2,3,4,6,8,9) (0,2,3,5,6,7) (0,1,6) {199,214,200,235,40,202,195,213,31,176}\n" +
                "[#..#....##] (0,1,3,4,6,7,8) (0,1,2,9) (1,2,3,5,9) (1,3,4,6,7,8) (2,9) (2,3,4,5,6,7,8,9) (0,4,7,8) (2,4,5,6,7,8) (3,4,5,7) (0,2,6,8) {29,33,186,41,165,166,170,165,174,41}\n" +
                "[....#] (0,1,3) (0,1,4) (2,4) (0,1,2) (0,1,2,3) (1,3,4) (0,2,3,4) {66,74,51,57,61}\n" +
                "[.#...#] (0,1,2,3,4) (1,2,3,4,5) (0,1,2) (2) (0,2,3,4,5) (4,5) {28,20,46,22,33,21}\n" +
                "[...##] (0,4) (1,2,3,4) (0,2) (2,3,4) (1) (1,3,4) {21,27,32,30,36}\n" +
                "[..##..] (0,2,3,4,5) (0,1,3) (1,3,4,5) (1,2,4) {28,30,25,35,32,22}\n" +
                "[#..#..] (0,1,4,5) (0,4) (0,2,4,5) (2,3,4,5) {17,11,19,13,30,30}\n" +
                "[.#..] (1,2) (2,3) (1,2,3) (0,2) (0,1) (0,1,3) {31,43,187,161}\n" +
                "[#.######.] (0,6) (0,1,2,5,6,8) (0,2,3,7,8) (1,2,4) (1,6,8) (0,2,3,4,5,6,7) (3,5,7,8) {45,45,62,50,39,43,47,50,56}\n" +
                "[###.....#] (3,4,6,7,8) (2,3,5) (3,4,6,7) (1,5,6,8) (0,1,5,7) (2,3,4,5) (1,2,4,5,6,8) (0,1,2) (0,2,5) (2) {38,41,65,52,51,56,40,43,30}\n" +
                "[##.#.#.#] (0,3,4,6,7) (0,2,3,4,5,7) (1,2,3,4,5,7) (2,3,4,5,6,7) (1,3,6,7) (0,3,5,6,7) (0,1,2,3,5,6,7) (1,2,4,5,6,7) (0,1,3,5,7) (0,1,2,3,4,5) {72,60,47,76,40,80,50,69}\n" +
                "[.#.#.#] (1,3,4) (1,2,3) (1,4,5) (0,5) (2,3) {2,23,18,33,23,10}\n" +
                "[.#....] (0,1,5) (0,1,3,4) (1,3,4,5) (0,1,2,3,5) (0,1) {180,196,9,27,18,34}\n" +
                "[...##.#] (0,2,4,5,6) (0,2,5) (2,3,5) (0,5,6) (4,5) (2,3,4,6) (0,1,2,3,6) (1,4,5) (1,3,5,6) {43,40,50,34,48,85,43}\n" +
                "[#...#....] (0,3,4,6,7,8) (1,3,5,6,7,8) (1,2,3,4,5,6,7,8) (3,4,5,7) (2,3,5,6,7) (0,7,8) (2,3,4,5,6,8) {25,4,22,55,46,40,38,54,40}\n" +
                "[###...##..] (0,3,5) (0,4,5,6,7,8) (6,7) (1,9) (7,8) (0,2,3,4,5,6,7,8) (0,2) (0,1,2,4,5,7,8) (3,9) (0,1,2,4,6,8,9) (1,2,3,5,6,7,9) (1,2,3,4,5,6,7,8) (0,1,5,9) {275,54,246,36,69,80,58,65,74,38}\n" +
                "[#...#.] (1,2,3,4,5) (0,4) (0,1,2) (3) {20,26,26,30,26,16}\n" +
                "[..##.#.#.] (0,2,3,4,5,6,7,8) (1,3,4,5,6,7,8) (0,1,2,3,4,6,7,8) (0,1,2,3,4,6) (2,4,5) (1,2,3,7) (1,2,3,4,6,7,8) {171,38,187,185,193,163,184,180,179}\n" +
                "[#.#####.##] (2,4,5,7,8) (0,3,6,7,8,9) (0,2,3,4,5,6,8,9) (3,4,5,8,9) (0,1,2,4,5,7,8,9) (2,4,6,8) (2,3,4,5,7,8) (1,2,4,5,6,7,8) {131,121,157,29,169,150,33,136,174,143}\n" +
                "[##..#.##] (0,1,2,4,5,7) (3,4,5,7) (3,4,7) (2,4) (1,4,5,6) (0,1,2,5,6,7) (1,3,6) (1,2,3,4,7) (4,5) (1,3) {19,52,40,58,100,68,26,66}";
    }
}
