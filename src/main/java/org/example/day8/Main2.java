package org.example.day8;

import java.io.*;
import java.nio.file.*;
import java.util.*;
import java.util.stream.*;

public class Main2 {
    // both parts
    private static String getExample() {
        return "162,817,812\n" +
                "57,618,57\n" +
                "906,360,560\n" +
                "592,479,940\n" +
                "352,342,300\n" +
                "466,668,158\n" +
                "542,29,236\n" +
                "431,825,988\n" +
                "739,650,466\n" +
                "52,470,668\n" +
                "216,146,977\n" +
                "819,987,18\n" +
                "117,168,530\n" +
                "805,96,715\n" +
                "346,949,466\n" +
                "970,615,88\n" +
                "941,993,340\n" +
                "862,61,35\n" +
                "984,92,344\n" +
                "425,690,689";
    }
    private static String getInput() {
        return "36415,68920,58392\n" +
                "14024,33051,52661\n" +
                "57144,57517,12838\n" +
                "58302,65200,92212\n" +
                "41400,40632,14764\n" +
                "78671,19056,61442\n" +
                "84456,49300,99766\n" +
                "19276,66594,92697\n" +
                "9937,7483,46507\n" +
                "55571,30628,35816\n" +
                "6479,62295,19988\n" +
                "30811,17706,80042\n" +
                "79295,58136,10356\n" +
                "26039,61077,49994\n" +
                "57780,9503,94290\n" +
                "38342,90048,75329\n" +
                "55382,82368,73199\n" +
                "9281,48753,80235\n" +
                "83423,29572,12155\n" +
                "90956,44490,20181\n" +
                "26152,84343,27091\n" +
                "14194,58939,33898\n" +
                "70775,57205,3459\n" +
                "69269,43436,31416\n" +
                "80564,88243,5759\n" +
                "19,65397,71346\n" +
                "75063,2048,2492\n" +
                "49766,56000,42530\n" +
                "74537,5920,16614\n" +
                "48084,79101,68315\n" +
                "74468,99553,3702\n" +
                "33055,26445,80507\n" +
                "11959,64323,10256\n" +
                "52187,9540,8078\n" +
                "48800,54460,28363\n" +
                "86191,68750,50365\n" +
                "89109,13062,40869\n" +
                "54833,96218,10587\n" +
                "95668,81000,14908\n" +
                "59237,78542,79299\n" +
                "37732,58099,23040\n" +
                "53163,88044,22258\n" +
                "9654,92983,31477\n" +
                "95219,5591,47977\n" +
                "84114,22363,34192\n" +
                "39178,60031,20289\n" +
                "31902,30190,91790\n" +
                "89708,17196,3923\n" +
                "68722,85819,16329\n" +
                "20852,60314,61462\n" +
                "81954,48755,49912\n" +
                "92544,64844,86073\n" +
                "78756,41754,88670\n" +
                "45568,56823,1532\n" +
                "60833,5541,7312\n" +
                "18159,76850,70262\n" +
                "81070,49910,35300\n" +
                "46282,68868,69109\n" +
                "38497,37781,98872\n" +
                "23009,70036,82119\n" +
                "87702,15505,93545\n" +
                "90085,2351,31133\n" +
                "32008,67301,31407\n" +
                "66714,59017,80779\n" +
                "84334,62726,52558\n" +
                "93998,71993,86321\n" +
                "38998,35354,37836\n" +
                "37351,45962,37698\n" +
                "32625,56125,13844\n" +
                "4365,64583,61667\n" +
                "8472,21904,27542\n" +
                "48319,73869,68410\n" +
                "60984,99538,51173\n" +
                "14194,34463,25181\n" +
                "25335,98359,64414\n" +
                "3403,97840,99324\n" +
                "61139,73262,94668\n" +
                "22063,97900,18216\n" +
                "22401,61896,80701\n" +
                "44737,70637,99646\n" +
                "47096,61569,9717\n" +
                "51068,14063,22458\n" +
                "53570,63499,39819\n" +
                "3959,98102,92826\n" +
                "31878,47217,25766\n" +
                "36184,75548,21777\n" +
                "2323,61548,33432\n" +
                "45815,17856,99763\n" +
                "69869,72197,21768\n" +
                "21886,35288,76757\n" +
                "22156,53414,37226\n" +
                "43943,10101,4462\n" +
                "68691,66760,95950\n" +
                "62686,34218,70842\n" +
                "19862,84404,41402\n" +
                "45699,5160,73434\n" +
                "25274,56079,38350\n" +
                "90487,67047,253\n" +
                "81988,36145,12646\n" +
                "44244,99576,84397\n" +
                "3034,57200,8926\n" +
                "62327,93552,95550\n" +
                "91135,14650,66694\n" +
                "76186,95864,13566\n" +
                "68649,62000,74582\n" +
                "67696,18579,78741\n" +
                "87114,6047,28094\n" +
                "38816,3194,9988\n" +
                "11649,65434,20740\n" +
                "98536,84152,66127\n" +
                "52003,39064,5651\n" +
                "76271,63921,20243\n" +
                "2571,85660,71519\n" +
                "39166,37024,30790\n" +
                "64932,86441,8881\n" +
                "15118,38798,67466\n" +
                "16458,43773,94834\n" +
                "44418,10360,88948\n" +
                "7345,80677,98578\n" +
                "50102,162,89991\n" +
                "79510,28388,50766\n" +
                "48617,31223,88014\n" +
                "51599,95808,90783\n" +
                "45905,54220,91270\n" +
                "45359,83830,53095\n" +
                "96550,88634,59644\n" +
                "32367,18939,91003\n" +
                "53242,70831,83377\n" +
                "92089,91940,42886\n" +
                "51243,59264,84315\n" +
                "52146,70143,8662\n" +
                "52676,20578,40105\n" +
                "56217,95591,30748\n" +
                "7316,38765,63036\n" +
                "78647,24241,10365\n" +
                "69025,56487,36043\n" +
                "688,58087,10964\n" +
                "98263,2211,41973\n" +
                "45439,94428,95753\n" +
                "17709,81952,88214\n" +
                "1812,5023,19216\n" +
                "10820,63452,14492\n" +
                "9188,87121,88201\n" +
                "93205,91177,44823\n" +
                "47158,34566,27884\n" +
                "19157,3140,76951\n" +
                "61642,65741,2433\n" +
                "22685,76153,69005\n" +
                "60918,56155,4167\n" +
                "90253,32004,26464\n" +
                "55253,34272,95818\n" +
                "35777,60642,36431\n" +
                "24167,66299,99985\n" +
                "33049,79263,14660\n" +
                "14233,89547,4642\n" +
                "37301,41014,26220\n" +
                "79872,50573,76028\n" +
                "16650,85884,57476\n" +
                "53047,94647,71334\n" +
                "73978,3873,11483\n" +
                "12365,12435,60688\n" +
                "45063,15380,10593\n" +
                "69897,99116,55512\n" +
                "11046,17202,5319\n" +
                "60128,38565,7134\n" +
                "80512,7836,58766\n" +
                "80517,9577,97707\n" +
                "49921,94904,51240\n" +
                "62147,75760,85526\n" +
                "67110,19255,7904\n" +
                "87772,85730,38867\n" +
                "35488,52030,54540\n" +
                "90294,91940,53420\n" +
                "38661,42061,76065\n" +
                "73668,70692,44988\n" +
                "183,61144,78468\n" +
                "83173,41519,4745\n" +
                "45665,63804,35909\n" +
                "54514,34498,10329\n" +
                "42949,99057,1285\n" +
                "55990,38579,49275\n" +
                "8902,20642,90642\n" +
                "57691,18807,15491\n" +
                "32886,20729,77175\n" +
                "13143,37372,11173\n" +
                "81548,57025,59906\n" +
                "83573,77081,60717\n" +
                "90355,95475,25069\n" +
                "67601,23292,21598\n" +
                "64739,40911,94799\n" +
                "81072,45584,28000\n" +
                "30397,94636,98753\n" +
                "67470,65463,79568\n" +
                "88488,68633,33364\n" +
                "35845,98541,7192\n" +
                "44347,83380,63192\n" +
                "24650,78391,53596\n" +
                "11379,49933,92404\n" +
                "90546,7895,46290\n" +
                "52761,69242,14187\n" +
                "23573,81055,28939\n" +
                "58508,2219,78684\n" +
                "54459,70730,10276\n" +
                "35358,21962,59615\n" +
                "85949,40601,80056\n" +
                "62628,25545,94817\n" +
                "31336,92181,98427\n" +
                "48316,51910,13467\n" +
                "67410,116,71566\n" +
                "82660,33485,32184\n" +
                "89053,29315,29468\n" +
                "84460,15496,1223\n" +
                "37097,38543,94002\n" +
                "86064,98580,46758\n" +
                "578,53014,46254\n" +
                "43670,76005,4265\n" +
                "25696,10516,1550\n" +
                "15662,38721,32791\n" +
                "14219,65512,66546\n" +
                "27136,56701,78700\n" +
                "41100,96982,89656\n" +
                "40963,37948,65173\n" +
                "22181,96159,49338\n" +
                "85322,72332,22140\n" +
                "24909,38186,81601\n" +
                "72226,13174,12193\n" +
                "23102,66985,3997\n" +
                "62947,56654,61721\n" +
                "24026,60406,58538\n" +
                "99990,19176,7077\n" +
                "48540,82087,24426\n" +
                "39656,31527,34208\n" +
                "57753,80570,89726\n" +
                "1629,26338,56742\n" +
                "296,15118,26143\n" +
                "49225,861,89934\n" +
                "85578,29175,94267\n" +
                "21539,17826,99628\n" +
                "28645,90764,30021\n" +
                "26918,36340,97195\n" +
                "99154,65173,87047\n" +
                "5072,80414,58435\n" +
                "48145,28009,12641\n" +
                "30442,36436,52443\n" +
                "34335,26646,47322\n" +
                "24839,11840,67368\n" +
                "13050,12910,6215\n" +
                "67994,44011,19164\n" +
                "97187,20734,64690\n" +
                "37896,29310,53574\n" +
                "57513,30023,17896\n" +
                "52833,57575,59026\n" +
                "29160,75089,3488\n" +
                "14610,41477,77571\n" +
                "94039,16565,72255\n" +
                "60400,47053,71982\n" +
                "69489,62767,21053\n" +
                "75466,78542,63515\n" +
                "77823,29627,95788\n" +
                "56121,15534,96319\n" +
                "61871,52089,39161\n" +
                "6008,61865,95076\n" +
                "3976,80921,28593\n" +
                "71863,35839,8721\n" +
                "62779,93713,11128\n" +
                "17766,21264,1936\n" +
                "51802,97490,96735\n" +
                "60860,35324,11443\n" +
                "41776,27355,32908\n" +
                "14030,31548,92751\n" +
                "16462,91759,26215\n" +
                "46250,28224,56642\n" +
                "82021,863,96769\n" +
                "63306,72364,97564\n" +
                "37930,56448,53708\n" +
                "80958,74163,74298\n" +
                "40020,42426,85843\n" +
                "94261,10545,2905\n" +
                "13362,54692,54124\n" +
                "57281,20240,82380\n" +
                "66573,2501,10853\n" +
                "97891,41233,164\n" +
                "47929,23942,85215\n" +
                "86317,6412,37806\n" +
                "20946,92779,23417\n" +
                "54002,93515,18487\n" +
                "96068,3591,55636\n" +
                "20606,47522,61111\n" +
                "83331,44389,29255\n" +
                "18087,34237,90761\n" +
                "77944,85929,76583\n" +
                "20363,66309,42790\n" +
                "28766,3154,18069\n" +
                "94295,77536,60839\n" +
                "31624,62139,15923\n" +
                "84242,29669,26170\n" +
                "21451,84720,22396\n" +
                "42951,335,4737\n" +
                "10200,28994,56033\n" +
                "41341,23305,1041\n" +
                "10857,52641,86014\n" +
                "94273,59785,23037\n" +
                "33363,56393,66856\n" +
                "61288,99112,29564\n" +
                "9622,26103,32807\n" +
                "60647,27499,98337\n" +
                "6905,14544,59106\n" +
                "4854,5072,36286\n" +
                "43817,6205,72025\n" +
                "9492,78143,74525\n" +
                "81729,75552,30667\n" +
                "46971,92348,7224\n" +
                "35206,57915,96758\n" +
                "8983,63721,45551\n" +
                "10135,45457,73909\n" +
                "37952,20536,68339\n" +
                "85198,43742,43640\n" +
                "25530,47231,73785\n" +
                "93717,36844,71327\n" +
                "74765,4538,15570\n" +
                "24690,61529,96445\n" +
                "754,74351,42973\n" +
                "122,51439,80476\n" +
                "72452,69318,90679\n" +
                "2418,46656,70582\n" +
                "87171,3847,81184\n" +
                "49127,28456,41770\n" +
                "13214,78475,88109\n" +
                "46992,4437,94560\n" +
                "75964,57422,25424\n" +
                "50084,4599,40175\n" +
                "6746,54924,15981\n" +
                "30848,5141,66480\n" +
                "11828,59067,93929\n" +
                "78382,81953,6217\n" +
                "86500,15867,52291\n" +
                "25054,7221,65287\n" +
                "93545,20303,54517\n" +
                "48203,71374,55680\n" +
                "51458,46903,47848\n" +
                "85446,46960,18087\n" +
                "93639,59462,39238\n" +
                "10134,62359,79814\n" +
                "17492,62566,47706\n" +
                "86979,9612,94827\n" +
                "65149,74675,36259\n" +
                "36782,10960,8445\n" +
                "84677,61838,80056\n" +
                "94532,60487,22249\n" +
                "11824,86885,60332\n" +
                "67189,60339,62708\n" +
                "42094,30117,96992\n" +
                "55620,88502,80547\n" +
                "82906,32292,51951\n" +
                "44875,43739,88887\n" +
                "97290,54665,27032\n" +
                "40414,91116,92752\n" +
                "73310,75286,12812\n" +
                "86526,26445,52365\n" +
                "28239,73440,426\n" +
                "65110,91862,10637\n" +
                "1730,81358,49289\n" +
                "63814,36022,64718\n" +
                "48118,30244,51147\n" +
                "79571,30880,87932\n" +
                "45629,93736,56220\n" +
                "23218,2340,96602\n" +
                "51644,48907,54173\n" +
                "4229,47878,55898\n" +
                "4805,92587,37514\n" +
                "35097,79452,84848\n" +
                "72053,452,73569\n" +
                "74971,96198,45620\n" +
                "71230,37574,77288\n" +
                "79075,78241,265\n" +
                "33743,28304,30582\n" +
                "19790,88442,51868\n" +
                "8363,45139,61815\n" +
                "86987,85034,90277\n" +
                "92355,24265,35997\n" +
                "4800,98171,94460\n" +
                "99067,84103,17384\n" +
                "74622,39501,20836\n" +
                "34749,42351,6617\n" +
                "68456,90270,92914\n" +
                "48638,75580,97915\n" +
                "69935,62530,99134\n" +
                "80506,77397,20526\n" +
                "15540,53662,40078\n" +
                "23273,5722,97080\n" +
                "57740,58316,82533\n" +
                "16814,72439,83692\n" +
                "82375,85468,292\n" +
                "40105,37939,7870\n" +
                "1591,16282,50739\n" +
                "83702,3989,34236\n" +
                "62800,63638,816\n" +
                "82131,91633,35574\n" +
                "13889,39000,4531\n" +
                "48573,1163,8654\n" +
                "13016,26263,63359\n" +
                "99653,19581,32556\n" +
                "39695,58130,33089\n" +
                "1110,5702,23763\n" +
                "30659,97860,90917\n" +
                "43314,9510,51810\n" +
                "11282,37060,76957\n" +
                "13102,70972,81526\n" +
                "38336,5921,87218\n" +
                "96316,86337,65228\n" +
                "55517,17094,79615\n" +
                "35392,23268,3187\n" +
                "39533,71940,19047\n" +
                "83455,40477,7744\n" +
                "79724,43536,28164\n" +
                "6397,85954,20934\n" +
                "61131,39518,11018\n" +
                "10461,30723,53677\n" +
                "81792,13860,4342\n" +
                "75818,62124,56007\n" +
                "43685,84179,86927\n" +
                "61687,44763,12039\n" +
                "84002,56581,8507\n" +
                "72982,24205,52676\n" +
                "90926,94271,88963\n" +
                "70058,69505,16180\n" +
                "57249,65904,49755\n" +
                "83435,7224,8819\n" +
                "82490,95292,36673\n" +
                "87574,61112,44821\n" +
                "11844,52253,69497\n" +
                "19070,7728,91003\n" +
                "88228,29546,50837\n" +
                "74710,81087,28365\n" +
                "84840,96152,48760\n" +
                "47286,62441,70443\n" +
                "84421,84226,5987\n" +
                "94207,10789,90747\n" +
                "52371,15775,42666\n" +
                "71939,3000,95464\n" +
                "58240,61434,80339\n" +
                "20553,89298,44490\n" +
                "62677,34643,51006\n" +
                "63603,37213,85886\n" +
                "29471,97772,7974\n" +
                "46786,66490,78685\n" +
                "93857,3214,19845\n" +
                "16799,98522,8989\n" +
                "11319,5990,68093\n" +
                "969,88163,57327\n" +
                "35450,28497,34672\n" +
                "57171,87102,69406\n" +
                "54321,30484,56662\n" +
                "46066,57960,21725\n" +
                "19248,71611,5803\n" +
                "39358,25696,14977\n" +
                "59509,78681,11430\n" +
                "79239,62103,75972\n" +
                "49747,10763,17478\n" +
                "15711,95981,55297\n" +
                "35095,24677,10635\n" +
                "24403,19381,31008\n" +
                "24526,43012,55313\n" +
                "33682,56222,92679\n" +
                "92422,35605,45320\n" +
                "9839,87732,10360\n" +
                "79216,23341,95247\n" +
                "44194,65310,38694\n" +
                "4837,67851,5281\n" +
                "79888,38782,41034\n" +
                "28461,54688,19674\n" +
                "655,23051,1024\n" +
                "71496,34224,97863\n" +
                "24978,7053,95090\n" +
                "14907,43198,72750\n" +
                "66373,50732,71758\n" +
                "57159,86859,89240\n" +
                "51195,46772,32640\n" +
                "82582,94024,12609\n" +
                "62413,72494,81309\n" +
                "99399,68100,69742\n" +
                "2386,37319,63444\n" +
                "92380,24433,9882\n" +
                "5635,57766,33058\n" +
                "53562,94506,72464\n" +
                "2263,80830,72737\n" +
                "27453,22089,62187\n" +
                "52667,62674,38811\n" +
                "60845,91108,39835\n" +
                "88942,30223,95011\n" +
                "50359,41556,86392\n" +
                "66409,76851,99754\n" +
                "89953,34964,32107\n" +
                "61821,82171,7218\n" +
                "75390,54891,44025\n" +
                "11586,77850,42332\n" +
                "92537,92014,98939\n" +
                "72891,12282,7367\n" +
                "85655,1428,90437\n" +
                "10934,3312,23426\n" +
                "87744,99499,8122\n" +
                "48020,24897,45046\n" +
                "30742,95601,91519\n" +
                "17223,29458,69143\n" +
                "23254,10120,10096\n" +
                "74765,29411,43543\n" +
                "86073,82830,60149\n" +
                "84057,50032,40896\n" +
                "56632,43484,52917\n" +
                "3038,41687,57649\n" +
                "86646,94735,51222\n" +
                "23007,62811,20486\n" +
                "30266,96802,87479\n" +
                "64009,81685,22815\n" +
                "86685,63535,53217\n" +
                "81068,19709,41393\n" +
                "29800,29497,78862\n" +
                "66574,96710,88065\n" +
                "61931,58344,95709\n" +
                "42808,83475,39933\n" +
                "85319,26340,76164\n" +
                "4453,69115,72355\n" +
                "5576,4937,87162\n" +
                "80185,59508,60687\n" +
                "97763,49555,73668\n" +
                "30493,64736,19162\n" +
                "63371,26704,22407\n" +
                "31453,59165,83450\n" +
                "12355,42297,2253\n" +
                "87347,76039,41846\n" +
                "72647,84020,82517\n" +
                "72385,73774,81525\n" +
                "64424,42113,26838\n" +
                "39622,5599,89316\n" +
                "76992,7839,54826\n" +
                "49262,41840,15819\n" +
                "49922,93057,46968\n" +
                "25653,318,21934\n" +
                "69472,91368,52572\n" +
                "16657,20161,87764\n" +
                "18165,16424,30394\n" +
                "35898,75240,67584\n" +
                "7431,71338,22520\n" +
                "74287,90288,43385\n" +
                "3945,61725,79241\n" +
                "57539,84026,40669\n" +
                "49453,52338,16624\n" +
                "28547,61127,47041\n" +
                "51920,28237,83972\n" +
                "84478,88438,8188\n" +
                "96576,88584,27825\n" +
                "35418,55996,37702\n" +
                "91005,31681,59177\n" +
                "40790,24684,99663\n" +
                "5705,76269,68871\n" +
                "74031,86206,83640\n" +
                "79123,16490,48163\n" +
                "71372,44176,96525\n" +
                "61805,45358,11040\n" +
                "83346,24538,58650\n" +
                "8791,49445,99469\n" +
                "12840,40324,33644\n" +
                "99055,95717,12111\n" +
                "89276,60765,49391\n" +
                "77345,10782,50595\n" +
                "22379,42258,75514\n" +
                "57,52177,1209\n" +
                "94610,80942,48980\n" +
                "28607,51344,43444\n" +
                "43633,27786,33482\n" +
                "50527,24222,64362\n" +
                "79768,94219,6021\n" +
                "48117,53867,56826\n" +
                "62754,59324,2133\n" +
                "6855,36379,87019\n" +
                "16552,90676,45008\n" +
                "85053,9578,86841\n" +
                "20301,91636,63437\n" +
                "41332,36974,67298\n" +
                "69564,54709,97309\n" +
                "10092,52277,72428\n" +
                "16012,13862,29433\n" +
                "59069,18018,61585\n" +
                "7969,57867,30285\n" +
                "40012,26861,35791\n" +
                "73841,30961,28513\n" +
                "49170,64037,68084\n" +
                "73103,88218,13720\n" +
                "43158,71369,44003\n" +
                "28688,33095,39091\n" +
                "6809,49127,85958\n" +
                "11621,39327,50598\n" +
                "22017,66706,55640\n" +
                "88569,53026,7245\n" +
                "82033,80359,10735\n" +
                "48011,27960,35863\n" +
                "73502,28734,74938\n" +
                "5596,39817,63695\n" +
                "13268,32664,79256\n" +
                "10427,56665,9521\n" +
                "87873,48706,24383\n" +
                "25025,36410,59113\n" +
                "50197,80861,59561\n" +
                "57782,4536,86231\n" +
                "33839,11846,66788\n" +
                "47271,4280,36546\n" +
                "71719,33687,78114\n" +
                "69348,59441,73987\n" +
                "21083,64814,60381\n" +
                "36356,91688,44009\n" +
                "43290,42242,85554\n" +
                "27986,88979,21058\n" +
                "49143,52185,39023\n" +
                "97796,55179,89614\n" +
                "16024,50861,14916\n" +
                "49364,49846,39000\n" +
                "71165,83704,46915\n" +
                "66882,65154,53736\n" +
                "52523,95883,76739\n" +
                "18805,19235,56006\n" +
                "37060,14581,87615\n" +
                "25105,31332,42885\n" +
                "98841,83755,29583\n" +
                "49403,5634,25792\n" +
                "89617,237,52550\n" +
                "98141,68414,85582\n" +
                "60258,75962,40544\n" +
                "65325,49346,27026\n" +
                "86780,14300,37808\n" +
                "2829,86317,86597\n" +
                "80798,14300,56464\n" +
                "29837,10085,78849\n" +
                "66946,12451,55057\n" +
                "89084,87934,467\n" +
                "4364,85779,76472\n" +
                "63669,66180,73127\n" +
                "44242,65798,51158\n" +
                "92522,98491,18840\n" +
                "82153,42236,89724\n" +
                "59509,2573,59617\n" +
                "5509,46651,35528\n" +
                "55593,4823,24029\n" +
                "40783,39097,15966\n" +
                "44507,28804,93051\n" +
                "11696,92100,50920\n" +
                "60098,5244,58963\n" +
                "73061,82404,71804\n" +
                "59009,15574,77742\n" +
                "22494,70278,62765\n" +
                "56150,36299,58871\n" +
                "99149,15709,73853\n" +
                "20691,52335,50419\n" +
                "52755,88514,29484\n" +
                "51308,94393,54037\n" +
                "40726,47481,57721\n" +
                "93297,51404,76018\n" +
                "46141,12961,89170\n" +
                "67673,13520,40647\n" +
                "9164,94159,36581\n" +
                "79883,59136,43478\n" +
                "97147,60730,42039\n" +
                "12869,88974,46264\n" +
                "13587,72214,73883\n" +
                "38171,91509,91450\n" +
                "22246,89012,20016\n" +
                "40185,80042,55828\n" +
                "52000,77946,79017\n" +
                "59167,78144,10665\n" +
                "6710,42930,6222\n" +
                "11069,21078,51169\n" +
                "13732,43871,82273\n" +
                "50199,59795,63680\n" +
                "54976,50632,78209\n" +
                "3521,27106,86184\n" +
                "70749,85540,83356\n" +
                "10119,48846,30077\n" +
                "49050,90996,11527\n" +
                "33710,85516,55921\n" +
                "9142,26566,22495\n" +
                "9863,95363,1004\n" +
                "75688,85948,66157\n" +
                "51377,34158,75079\n" +
                "83795,52972,48193\n" +
                "79093,79212,89122\n" +
                "84656,4295,67514\n" +
                "62091,94884,99807\n" +
                "32625,75399,6527\n" +
                "75464,78904,84233\n" +
                "72181,48149,84157\n" +
                "84240,96553,44404\n" +
                "51356,56921,2536\n" +
                "75167,60322,48045\n" +
                "63119,29554,87781\n" +
                "11484,18292,56258\n" +
                "49927,68957,57716\n" +
                "379,38770,81962\n" +
                "94705,90998,68002\n" +
                "97934,93865,70777\n" +
                "19434,62450,73226\n" +
                "76974,23708,3172\n" +
                "56390,16943,13206\n" +
                "11523,46236,87239\n" +
                "27844,23073,69317\n" +
                "10286,20762,27518\n" +
                "60024,66313,18291\n" +
                "619,21639,80385\n" +
                "12676,21653,94078\n" +
                "47966,64968,25774\n" +
                "46754,342,35569\n" +
                "97296,91658,89604\n" +
                "39878,70486,13615\n" +
                "17477,3236,3204\n" +
                "49136,12634,2296\n" +
                "86846,15423,36049\n" +
                "76586,66113,19730\n" +
                "35982,54388,53177\n" +
                "35202,95413,99261\n" +
                "23821,51047,90803\n" +
                "68323,95054,26629\n" +
                "77055,9345,73703\n" +
                "55207,8429,72351\n" +
                "78725,73228,16943\n" +
                "91876,23638,5380\n" +
                "80719,10408,72877\n" +
                "79369,95875,71722\n" +
                "82346,63182,2252\n" +
                "57462,1403,2446\n" +
                "29794,71824,54432\n" +
                "67675,17153,81111\n" +
                "64582,57220,84469\n" +
                "77997,11727,58573\n" +
                "9878,88883,89008\n" +
                "10501,94563,58154\n" +
                "97006,63808,98881\n" +
                "90223,77619,37179\n" +
                "75721,81227,78785\n" +
                "54747,14870,32361\n" +
                "70371,27076,80199\n" +
                "69011,16567,61103\n" +
                "71207,39997,93356\n" +
                "16164,61457,92795\n" +
                "14815,42004,63047\n" +
                "239,69582,65416\n" +
                "81211,95881,40863\n" +
                "29678,63902,86207\n" +
                "88182,25871,13643\n" +
                "82933,57081,97879\n" +
                "23599,5454,80459\n" +
                "9453,75764,67615\n" +
                "70848,58439,9968\n" +
                "92601,30972,31699\n" +
                "40400,11072,37220\n" +
                "56212,78091,39576\n" +
                "59771,4701,68784\n" +
                "15551,58641,15220\n" +
                "95604,71306,47942\n" +
                "36441,33490,59826\n" +
                "13693,86945,245\n" +
                "29991,42737,36162\n" +
                "89218,76073,12528\n" +
                "65474,16777,26793\n" +
                "70920,34442,88890\n" +
                "71458,20547,63598\n" +
                "14383,56282,9305\n" +
                "1425,35599,91936\n" +
                "13806,89014,42766\n" +
                "45961,10024,86930\n" +
                "7122,10636,29764\n" +
                "20371,45443,30915\n" +
                "54743,12153,89039\n" +
                "98666,55199,59224\n" +
                "12108,1924,16781\n" +
                "14233,4950,2324\n" +
                "49449,25828,98430\n" +
                "74270,43044,82191\n" +
                "37806,7393,35639\n" +
                "74204,11293,64077\n" +
                "28698,25558,95123\n" +
                "85464,82619,20419\n" +
                "71159,54310,11630\n" +
                "32025,11300,32071\n" +
                "15763,13414,76454\n" +
                "27712,1572,64717\n" +
                "1101,91894,16806\n" +
                "40863,6674,45529\n" +
                "64662,35944,38647\n" +
                "13946,16059,28579\n" +
                "86482,42509,22302\n" +
                "65246,27874,14525\n" +
                "452,62708,38411\n" +
                "93150,81526,70956\n" +
                "78358,37118,29923\n" +
                "20700,65945,87435\n" +
                "27425,83269,4337\n" +
                "26059,72697,52579\n" +
                "81760,75188,46636\n" +
                "58108,72138,40412\n" +
                "94216,82006,39638\n" +
                "25321,47225,62697\n" +
                "83918,28027,71320\n" +
                "59574,44300,9995\n" +
                "41096,49504,27840\n" +
                "38784,93204,54421\n" +
                "7266,3105,59112\n" +
                "21687,95267,80758\n" +
                "77538,76226,20203\n" +
                "64075,13346,35888\n" +
                "60536,15996,96291\n" +
                "34164,30431,73826\n" +
                "27392,38525,4728\n" +
                "95798,18780,62596\n" +
                "14434,73377,83895\n" +
                "97834,339,46978\n" +
                "85618,16240,23952\n" +
                "4346,70108,11772\n" +
                "36331,60991,2613\n" +
                "64941,38723,94948\n" +
                "84658,84157,87518\n" +
                "63102,17883,96562\n" +
                "4953,77858,81795\n" +
                "67101,19269,86426\n" +
                "74814,18377,19499\n" +
                "12997,88928,95294\n" +
                "24187,90259,27880\n" +
                "61345,73808,37515\n" +
                "51036,28467,6285\n" +
                "67762,21674,53321\n" +
                "2202,37831,29367\n" +
                "23413,97516,91870\n" +
                "45624,65789,92071\n" +
                "90108,69814,60292\n" +
                "25263,18397,22651\n" +
                "77339,62630,29332\n" +
                "21433,60324,77955\n" +
                "4851,13891,77475\n" +
                "79434,14584,76556\n" +
                "2362,87534,36697\n" +
                "46318,98963,35109\n" +
                "5886,12916,59496\n" +
                "49922,86883,94598\n" +
                "89485,57703,29082\n" +
                "89905,43634,36208\n" +
                "9688,12647,71952\n" +
                "72279,97632,93646\n" +
                "42782,53782,79831\n" +
                "54465,47475,80766\n" +
                "73769,64827,72720\n" +
                "95569,221,81846\n" +
                "4590,89818,1389\n" +
                "36215,9027,71327\n" +
                "97787,2781,17803\n" +
                "62660,29213,83653\n" +
                "96952,92442,15414\n" +
                "63500,37690,42668\n" +
                "79856,94736,53864\n" +
                "44242,30035,43389\n" +
                "24913,18191,14179\n" +
                "2968,1002,55240\n" +
                "55974,86035,75084\n" +
                "10246,53924,86512\n" +
                "89215,3440,6930\n" +
                "83079,45249,81580\n" +
                "43514,21122,25410\n" +
                "39947,49497,54800\n" +
                "52070,27589,89702\n" +
                "54849,20626,51994\n" +
                "9966,52034,99272\n" +
                "11556,56220,25250\n" +
                "68377,74192,1225\n" +
                "59550,52855,68364\n" +
                "84756,71827,13030\n" +
                "94234,28826,94409\n" +
                "75166,65158,39502\n" +
                "75731,60713,56700\n" +
                "60162,28051,16710\n" +
                "33302,74764,53148\n" +
                "68480,8343,77389\n" +
                "75891,41370,25112\n" +
                "66367,35670,3655\n" +
                "4235,76937,95496\n" +
                "79737,25469,26369\n" +
                "66706,47076,19177\n" +
                "26962,47861,27106\n" +
                "63956,94368,93954\n" +
                "88518,83130,86454\n" +
                "66157,18876,23460\n" +
                "98586,33007,69721\n" +
                "86458,88205,66634\n" +
                "12261,76033,30001\n" +
                "87799,40692,68444\n" +
                "14531,92304,52533\n" +
                "2312,1069,39880\n" +
                "8352,10853,49409\n" +
                "1640,4470,66887\n" +
                "66876,60368,73071\n" +
                "7233,73633,1714\n" +
                "85230,28778,71056\n" +
                "56002,68297,68205\n" +
                "80574,78043,43603\n" +
                "63501,41401,33804\n" +
                "41203,53148,29332\n" +
                "91850,92340,61235\n" +
                "827,57677,38184\n" +
                "89515,19355,99543\n" +
                "15292,44190,78186\n" +
                "74628,88037,52425\n" +
                "65967,98933,39061\n" +
                "15518,403,8342\n" +
                "7760,29218,79844\n" +
                "22013,80137,11979\n" +
                "22494,53460,91183\n" +
                "86357,5069,75097\n" +
                "52763,83051,5287\n" +
                "55229,79039,89355\n" +
                "50244,73717,50229\n" +
                "60303,81952,25999\n" +
                "50534,311,55019\n" +
                "31830,92856,12571\n" +
                "63986,32667,21155\n" +
                "92219,70412,42787\n" +
                "69639,4847,24831\n" +
                "87234,79189,74383\n" +
                "95502,32915,87304\n" +
                "91787,65094,86439\n" +
                "44304,19038,5327\n" +
                "77674,80507,80351\n" +
                "7123,75837,85534\n" +
                "15765,25229,45067\n" +
                "29949,90306,88698\n" +
                "58686,93187,57282\n" +
                "55461,71270,81374\n" +
                "26236,25710,30676\n" +
                "59378,77894,26467\n" +
                "79466,57760,50137\n" +
                "91866,97778,85327\n" +
                "24188,70097,24402\n" +
                "9396,9829,19879\n" +
                "26414,47,36475\n" +
                "24892,82397,52175\n" +
                "35122,63002,82630\n" +
                "9416,3079,61070\n" +
                "68438,40150,49310\n" +
                "77441,48277,58189\n" +
                "33644,75609,4802\n" +
                "75901,5733,1843\n" +
                "87625,79533,27185\n" +
                "17046,76940,12520\n" +
                "32671,43550,69698\n" +
                "30612,45538,89107\n" +
                "880,89376,94699\n" +
                "66442,3310,96733\n" +
                "99892,12521,78424\n" +
                "88549,90337,32614\n" +
                "27389,83928,19106\n" +
                "72991,16844,6777\n" +
                "59614,19691,91457\n" +
                "96914,28600,43425\n" +
                "99956,68957,15813\n" +
                "60375,11864,16028\n" +
                "6720,94661,51125\n" +
                "22393,33270,393\n" +
                "75862,5522,55397\n" +
                "16117,51924,13894\n" +
                "79994,82604,77262\n" +
                "70187,93321,85430\n" +
                "80263,78494,40738\n" +
                "81164,52254,84308\n" +
                "42741,52053,74853\n" +
                "21722,30420,37976\n" +
                "21183,5664,90220\n" +
                "81532,17275,37890\n" +
                "52356,78108,31601\n" +
                "36561,41027,78387\n" +
                "40886,71037,31005\n" +
                "47637,87502,69327\n" +
                "56529,50206,18419\n" +
                "38433,2547,26208\n" +
                "84549,90995,88081\n" +
                "12384,61810,21776\n" +
                "3930,9340,36937\n" +
                "16564,52351,96766\n" +
                "75715,98951,64351\n" +
                "61195,35386,64402\n" +
                "54835,50436,23122\n" +
                "84193,13409,90345\n" +
                "44502,32849,49274\n" +
                "52371,99853,71830\n" +
                "68172,2459,46033\n" +
                "61590,60556,19921\n" +
                "56497,36672,31748\n" +
                "92365,88701,8426\n" +
                "22393,66985,82188\n" +
                "97413,7205,42870\n" +
                "31804,18823,13192\n" +
                "2608,62929,71046\n" +
                "67725,20496,85867\n" +
                "51649,88481,98103\n" +
                "7436,33642,16963\n" +
                "72375,13951,35692\n" +
                "94664,6618,22048";
    }

    public static void main(String[] args) throws Exception {
        String[] split = getInput().split("\n");
        List<String> input = new ArrayList<>();
        for (int i = 0; i < split.length; i++) {
            String[] a1 = split[i].split(",");
            input.add(split[i]);
        }

        System.out.println(part1(input));
        System.out.println(part2(input));
    }

    static long dist(Point a, Point b) {
        long dx = a.x - b.x;
        long dy = a.y - b.y;
        long dz = a.z - b.z;
        return dx * dx + dy * dy + dz * dz;
    }

    record Point(int x, int y, int z) {}

    static class Edge {
        long d;
        int i, j;
        Edge(long d, int i, int j) {
            this.d = d;
            this.i = i;
            this.j = j;
        }
    }

    static class UnionFind {
        int[] p;

        UnionFind(int n) {
            p = new int[n];
            for (int i = 0; i < n; i++) p[i] = i;
        }

        int find(int x) {
            if (p[x] != x) p[x] = find(p[x]);
            return p[x];
        }

        boolean union(int a, int b) {
            int fa = find(a);
            int fb = find(b);
            if (fa == fb) return false;
            p[fa] = fb;
            return true;
        }
    }

    static long part1(List<String> lines) {
        int n = lines.size();
        int c = (n == 20) ? 10 : 1000;

        List<Point> pts = new ArrayList<>();
        for (String s : lines) {
            int[] arr = Arrays.stream(s.split(","))
                    .mapToInt(Integer::parseInt)
                    .toArray();
            pts.add(new Point(arr[0], arr[1], arr[2]));
        }

        List<Edge> edges = new ArrayList<>();
        for (int i = 0; i < pts.size(); i++) {
            for (int j = 0; j < i; j++) {
                edges.add(new Edge(dist(pts.get(i), pts.get(j)), i, j));
            }
        }

        edges.sort(Comparator.comparingLong(e -> e.d));

        UnionFind uf = new UnionFind(n);

        for (int k = 0; k < c; k++) {
            Edge e = edges.get(k);
            uf.union(e.i, e.j);
        }

        Map<Integer, Integer> groups = new HashMap<>();
        for (int i = 0; i < n; i++) {
            int r = uf.find(i);
            groups.put(r, groups.getOrDefault(r, 0) + 1);
        }

        List<Integer> values = new ArrayList<>(groups.values());
        values.sort(Collections.reverseOrder());

        return (long) values.get(0) * values.get(1) * values.get(2);
    }

    static long part2(List<String> lines) {
        int n = lines.size();
        int target = (n == 20) ? 10 : 1000;

        List<Point> pts = new ArrayList<>();
        for (String s : lines) {
            int[] arr = Arrays.stream(s.split(","))
                    .mapToInt(Integer::parseInt)
                    .toArray();
            pts.add(new Point(arr[0], arr[1], arr[2]));
        }

        List<Edge> edges = new ArrayList<>();
        for (int i = 0; i < pts.size(); i++) {
            for (int j = 0; j < i; j++) {
                edges.add(new Edge(dist(pts.get(i), pts.get(j)), i, j));
            }
        }

        edges.sort(Comparator.comparingLong(e -> e.d));

        UnionFind uf = new UnionFind(n);

        int count = 0;
        for (Edge e : edges) {
            if (uf.union(e.i, e.j)) {
                count++;
                if (count == pts.size() - 1) {
                    return (long) pts.get(e.i).x * pts.get(e.j).x;
                }
            }
        }
        return -1;
    }
    // https://github.com/lxylxy123456/AdventOfCode2025/blob/aoc2025/d08/s.py
    // https://www.youtube.com/watch?v=y3iskSW1zuo
}
